import{_ as Y,a as Z}from"./invoice.e5a88e12.js";import{_ as ee,r as _,m as ie,j as ne,u as d,c as v,d as V,p as G,a as i,t as o,F as Q,i as U,g as H,o as f,l as J,b as te,f as se}from"./entry.9f9a9dfb.js";import{l as ae}from"./lists.7992369c.js";import{f as q}from"./index.948e5397.js";import"./modal.0d9b340c.js";import"./focus-management.d638ccdc.js";import"./micro-task.1986a3fd.js";import"./use-outside-click.ed17116a.js";import"./Listselect.a40e731a.js";import"./date_picker.afffdf65.js";import"./Textfield.377202c6.js";import"./file-upload.6d887046.js";import"./upload.6474fa87.js";import"./mutator.d9223ad6.js";import"./EYEA_cropped.50ccadf2.js";var F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"get_invoice"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filter"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"user_individual_membership"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"memberships"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"membership_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"first_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"phone_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"memberships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"membership_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pricing_plan_frequency_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pricing_plan_frequency_price"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"frequency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lump_sum_price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pricing_plan"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"invoice"},name:{kind:"Name",value:"pricing_invoice"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"billing"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"membership_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"filter"}}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"end_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"payment_method"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"invoice_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_member_paid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sub_total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"billing"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"payment_method"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"address"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:783}};F.loc.source={body:`query get_invoice($filter: String!) {
  member: user_individual_membership(where:{memberships:{
    membership_id:{_eq:$filter}
  }}) {
    first_name
    last_name
    phone_number
    email
    memberships{
        membership_id
        pricing_plan_frequency_id
    pricing_plan_frequency_price  {
      id
      frequency
      lump_sum_price
      pricing_plan {
        name
      }
    }
    }
  
  }
  
  invoice: pricing_invoice(
    where: { billing: { membership_id: { _eq: $filter } } }
  ) {
    id
    created_at
    date
    end_date
    status
    payment_method
    invoice_number
    has_member_paid
    reason
    sub_total
    tax
    total
    billing {
      payment_method
      address
    }
  }
}
# {
#   individual_membership{
#     membership_id
#   }
# }
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function N(n,t){if(n.kind==="FragmentSpread")t.add(n.name.value);else if(n.kind==="VariableDefinition"){var r=n.type;r.kind==="NamedType"&&t.add(r.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(l){N(l,t)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(l){N(l,t)}),n.definitions&&n.definitions.forEach(function(l){N(l,t)})}var j={};(function(){F.definitions.forEach(function(t){if(t.name){var r=new Set;N(t,r),j[t.name.value]=r}})})();function K(n,t){for(var r=0;r<n.definitions.length;r++){var l=n.definitions[r];if(l.name&&l.name.value==t)return l}}function le(n,t){var r={kind:n.kind,definitions:[K(n,t)]};n.hasOwnProperty("loc")&&(r.loc=n.loc);var l=j[t]||new Set,c=new Set,u=new Set;for(l.forEach(function(m){u.add(m)});u.size>0;){var k=u;u=new Set,k.forEach(function(m){if(!c.has(m)){c.add(m);var p=j[m]||new Set;p.forEach(function(S){u.add(S)})}})}return c.forEach(function(m){var p=K(n,m);p&&r.definitions.push(p)}),r}le(F,"get_invoice");const re={key:0,class:"flex flex-col py-5 2xl:w-[70%] lg:w-[80%] mx-auto"},de={class:"grid items-center w-full grid-cols-12 gap-3 px-8 py-5 mx-auto bg-gray-200 rounded-md dark:bg-dark-secondary lg:gap-0"},me={class:"flex flex-col col-span-12 gap-4 text-HahuGray2 dark:text-dark-text-secondary lg:col-span-10"},oe={class:"flex flex-row items-center justify-start gap-4"},ce={class:"text-3xl font-black leading-8 capitalize text-secondary-text dark:text-dark-text-secondary"},ue={class:"items-start font-medium w-full lg:w-[60%]"},pe={class:"flex flex-row justify-start capitalize whitespace-nowrap"},_e={class:"flow-root px-6 mt-8 bg-gray-100 rounded-md dark:bg-dark-secondary"},ve={class:"pb-2 -mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},fe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},ke={class:"min-w-full divide-y divide-gray-300"},be={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-dark-text-secondary sm:pl-0 whitespace-nowrap"},ge={class:"divide-y divide-gray-200 dark:text-dark-text-secondary"},xe={class:"py-4 pl-4 pr-3 text-sm font-medium text-left text-gray-900 dark:text-dark-text-secondary whitespace-nowrap sm:pl-0"},ye={class:"py-4 pr-3 text-sm text-left text-gray-500 dark:text-dark-text-secondary whitespace-nowrap"},he={class:"py-4 pr-3 text-sm text-left text-gray-500 dark:text-dark-text-secondary whitespace-nowrap"},we={class:"py-4 pr-3 text-sm text-left text-gray-500 dark:text-dark-text-secondary whitespace-nowrap"},Ne={class:"py-4 pr-3 text-sm text-left text-gray-500 dark:text-dark-text-secondary whitespace-nowrap"},Fe={class:"flex gap-5 py-4 pr-4 text-sm font-medium text-right whitespace-nowrap sm:pr-0"},Se={__name:"[id]",setup(n){const t=_({}),r=_("member_user"),l=_(!1),c=_(!1),u=ie(),k=_([]),m=_([{text:"date",value:"date",sortable:!1},{text:"Description",value:"reason",sortable:!1},{text:"Invoice Total",value:"total",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Payment Status",value:"payment_status",sortable:!1},{text:"Action",value:"action",sortable:!1}]);k.value=[{id:1,name:"abebe",reason:"car",total:1e3,status:"Valid",payment_status:"Paid",action:!0},{id:2,name:"abebe",reason:"car",total:1e3,status:"Valid",payment_status:"Paid",action:!0}];const p=ne(()=>u.params.id),{onResult:S,onError:Ve,loading:W,refetch:X}=ae(F,{filter:p,clientId:r});return S(({data:e})=>{var s,x,y,h,b,g,a,w,D,O,E,R,P,M,$,I,C,T,z,A,B,L;e&&(console.log("show data",e),k.value=e.invoice,t.value={id:e.invoice[0],bill_to:`${(s=e==null?void 0:e.member[0])==null?void 0:s.company_name}`,address:`${(y=(x=e==null?void 0:e.invoice[0])==null?void 0:x.billing)==null?void 0:y.address}`,phone:(h=e==null?void 0:e.member[0])==null?void 0:h.phone_number,email:(b=e==null?void 0:e.member[0])==null?void 0:b.email,date:(g=e==null?void 0:e.invoice[0])!=null&&g.date?q(new Date((a=e==null?void 0:e.invoice[0])==null?void 0:a.date),"dd/MM/yyyy"):"",invoice_number:e==null?void 0:e.invoice[0].invoice_number,contract_number:(D=(w=e==null?void 0:e.member[0])==null?void 0:w.memberships[0])==null?void 0:D.membership_id,plan:(R=(E=(O=e==null?void 0:e.member[0])==null?void 0:O.memberships[0])==null?void 0:E.pricing_plan_frequency_price)==null?void 0:R.name,price:($=(M=(P=e==null?void 0:e.member[0])==null?void 0:P.memberships[0])==null?void 0:M.pricing_plan_frequency_price)==null?void 0:$.lump_sum_price,frequency:(T=(C=(I=e==null?void 0:e.member[0])==null?void 0:I.memberships[0])==null?void 0:C.pricing_plan_frequency_price)==null?void 0:T.frequency,reason:(z=e==null?void 0:e.invoice[0])==null?void 0:z.reason,sub_total:(A=e==null?void 0:e.invoice[0])==null?void 0:A.sub_total,tax:(B=e==null?void 0:e.invoice[0])==null?void 0:B.tax,total:e==null?void 0:e.invoice[0].total,end_date:e==null?void 0:e.invoice[0].end_date,pricing_plan_frequency_id:(L=e==null?void 0:e.member[0])==null?void 0:L.memberships[0].pricing_plan_frequency_id})}),(e,s)=>{var b,g;const x=Y,y=Z,h=se;return d(W)?H("",!0):(f(),v("div",re,[V(x,{modelValue:d(l),"onUpdate:modelValue":s[0]||(s[0]=a=>G(l)?l.value=a:null),pricing_plan_frequency_id:(b=d(t))==null?void 0:b.pricing_plan_frequency_id,onRefetcher:d(X)},null,8,["modelValue","pricing_plan_frequency_id","onRefetcher"]),V(y,{modelValue:d(c),"onUpdate:modelValue":s[1]||(s[1]=a=>G(c)?c.value=a:null),invoiceDetail:d(t)},null,8,["modelValue","invoiceDetail"]),s[8]||(s[8]=i("h1",{class:"mb-5 text-3xl font-black text-primary"},"Billing",-1)),i("div",de,[i("div",me,[s[4]||(s[4]=i("div",{class:"text-base font-normal font-body"},"Current Membership",-1)),i("div",oe,[i("div",ce,o(d(t).plan),1)]),i("div",ue,o(((g=d(t))==null?void 0:g.reason)||""),1),i("div",pe,[i("div",null," Next Payment: on "+o(d(q)(new Date(d(t).end_date),"PP")),1)])]),s[5]||(s[5]=i("div",{class:"relative flex flex-col items-center w-full col-span-12 gap-4 xs:flex-row xs:justify-between lg:col-span-3 lg:flex-col 3xl:col-span-2"},null,-1))]),i("div",_e,[i("div",ve,[i("div",fe,[i("table",ke,[i("thead",null,[i("tr",null,[(f(!0),v(Q,null,U(d(m),a=>(f(),v("th",be,o(a.text),1))),256)),s[6]||(s[6]=i("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[i("span",{class:"sr-only dark:text-dark-text-secondary"},"Edit")],-1))])]),i("tbody",ge,[(f(!0),v(Q,null,U(d(k),a=>(f(),v("tr",{key:a.id},[i("td",xe,o(d(q)(new Date(a.date),"dd/MM/yyyy")),1),i("td",ye,o(a.reason),1),i("td",he,o(a.total),1),i("td",we,[i("p",{class:J(["text-center h-6 rounded-full flex justify-center items-center",a.has_member_paid?"text-green-600  bg-green-100":"text-red-600  bg-red-100"])},o(a.has_member_paid?"paid":"unpaid"),3)]),i("td",Ne,[i("p",{class:J(["text-center h-6 w-24 rounded-full flex justify-center items-center",a.has_member_paid?a.status=="paid"?"text-green-600  bg-green-100":"text-blue-600  bg-blue-100":"text-red-600  bg-red-100"])},o(a.has_member_paid?a.status=="paid"?"Verified":"unVerified":"unpaid"),3)]),i("td",Fe,[i("button",{onClick:s[2]||(s[2]=w=>c.value=!0),class:"px-2 py-1 text-white duration-200 rounded-md shadow bg-primary hover:shadow-lg"}," View Invoice "),a.has_member_paid?H("",!0):(f(),v("button",{key:0,onClick:s[3]||(s[3]=w=>l.value=!0),class:"flex items-center px-2 py-1 text-white duration-200 rounded-md shadow bg-primary gap-x-2 hover:shadow-lg"},[s[7]||(s[7]=te(" Attach Payment ")),V(h,{name:"teenyicons:attach-outline",class:"text-sm"})]))])]))),128))])])])])])]))}}},Le=ee(Se,[["__scopeId","data-v-ff721fcc"]]);export{Le as default};
